<Window x:Class="Veriflow.Desktop.Views.Shared.ProMessageBox"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Veriflow" 
        WindowStyle="None" AllowsTransparency="True" ResizeMode="NoResize"
        SizeToContent="WidthAndHeight" WindowStartupLocation="CenterOwner"
        Background="{StaticResource Brush.Panel}"
        MouseLeftButtonDown="Window_MouseLeftButtonDown">

    <Window.Resources>
        <Style TargetType="Button" x:Key="DialogButtonStyle">
            <Setter Property="Background" Value="#333333"/>
            <Setter Property="Foreground" Value="#DDDDDD"/>
            <Setter Property="Padding" Value="15,6"/>
            <Setter Property="Margin" Value="5,0"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="MinWidth" Value="80"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" 
                                BorderBrush="{TemplateBinding BorderBrush}" 
                                BorderThickness="{TemplateBinding BorderThickness}" 
                                CornerRadius="3">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#444444"/>
                                <Setter Property="Cursor" Value="Hand"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" Value="#222222"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style TargetType="Button" x:Key="DialogPrimaryButtonStyle" BasedOn="{StaticResource DialogButtonStyle}">
            <Setter Property="Background" Value="{DynamicResource Brush.Accent}"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Style.Triggers>
                <Trigger Property="IsDefault" Value="True">
                     <Setter Property="Background" Value="{DynamicResource Brush.Accent}"/>
                     <Setter Property="FontWeight" Value="Bold"/>
                </Trigger>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="{DynamicResource Brush.Accent.Hover}"/>
                </Trigger>
            </Style.Triggers>
        </Style>
    </Window.Resources>

    <Border BorderBrush="#333333" BorderThickness="1">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="35"/> <!-- Header -->
                <RowDefinition Height="*"/>  <!-- Body -->
                <RowDefinition Height="Auto"/> <!-- Footer -->
            </Grid.RowDefinitions>

            <!-- Header -->
            <Grid Grid.Row="0" Background="{StaticResource Brush.Panel.Header}">
                <TextBlock x:Name="TitleText" Text="{Binding Title}" VerticalAlignment="Center" Margin="15,0" Foreground="{StaticResource Brush.Text.Secondary}" FontWeight="SemiBold"/>
                <Button Content="âœ•" HorizontalAlignment="Right" Width="35" Height="35" 
                        Background="Transparent" Foreground="{StaticResource Brush.Text.Secondary}" BorderThickness="0"
                        Click="Close_Click">
                    <Button.Template>
                        <ControlTemplate TargetType="Button">
                            <Border Background="{TemplateBinding Background}">
                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter Property="Background" Value="#C42B1C"/>
                                    <Setter Property="Foreground" Value="White"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Button.Template>
                </Button>
            </Grid>

            <!-- Body -->
            <Grid Grid.Row="1" Margin="20">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                
                <!-- Icon -->
                <Path x:Name="IconPath" Width="32" Height="32" Stretch="Uniform" Margin="0,0,20,0" VerticalAlignment="Top">
                    <Path.Style>
                        <Style TargetType="Path">
                            <Setter Property="Fill" Value="White"/> <!-- Default -->
                            <Style.Triggers>
                                <!-- Warning / Exclamation -->
                                <DataTrigger Binding="{Binding MessageIcon}" Value="Warning">
                                    <Setter Property="Data" Value="M13,14H11V9H13M13,18H11V16H13M1,21H23L12,2L1,21Z"/>
                                    <Setter Property="Fill" Value="#FFCC00"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding MessageIcon}" Value="Exclamation">
                                    <Setter Property="Data" Value="M13,14H11V9H13M13,18H11V16H13M1,21H23L12,2L1,21Z"/>
                                    <Setter Property="Fill" Value="#FFCC00"/>
                                </DataTrigger>

                                <!-- Error / Stop / Hand -->
                                <DataTrigger Binding="{Binding MessageIcon}" Value="Error">
                                    <Setter Property="Data" Value="M12,2C17.53,2 22,6.47 22,12C22,17.53 17.53,22 12,22C6.47,22 2,17.53 2,12C2,6.47 6.47,2 12,2M15.59,7L12,10.59L8.41,7L7,8.41L10.59,12L7,15.59L8.41,17L12,13.41L15.59,17L17,15.59L13.41,12L17,8.41L15.59,7Z"/>
                                    <Setter Property="Fill" Value="#FF4444"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding MessageIcon}" Value="Stop">
                                    <Setter Property="Data" Value="M12,2C17.53,2 22,6.47 22,12C22,17.53 17.53,22 12,22C6.47,22 2,17.53 2,12C2,6.47 6.47,2 12,2M15.59,7L12,10.59L8.41,7L7,8.41L10.59,12L7,15.59L8.41,17L12,13.41L15.59,17L17,15.59L13.41,12L17,8.41L15.59,7Z"/>
                                    <Setter Property="Fill" Value="#FF4444"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding MessageIcon}" Value="Hand">
                                    <Setter Property="Data" Value="M12,2C17.53,2 22,6.47 22,12C22,17.53 17.53,22 12,22C6.47,22 2,17.53 2,12C2,6.47 6.47,2 12,2M15.59,7L12,10.59L8.41,7L7,8.41L10.59,12L7,15.59L8.41,17L12,13.41L15.59,17L17,15.59L13.41,12L17,8.41L15.59,7Z"/>
                                    <Setter Property="Fill" Value="#FF4444"/>
                                </DataTrigger>
                                
                                <!-- Info / Asterisk -->
                                <DataTrigger Binding="{Binding MessageIcon}" Value="Information">
                                    <Setter Property="Data" Value="M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M11,17H13V11H11V17Z"/>
                                    <Setter Property="Fill" Value="#2196F3"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding MessageIcon}" Value="Asterisk">
                                    <Setter Property="Data" Value="M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M11,17H13V11H11V17Z"/>
                                    <Setter Property="Fill" Value="#2196F3"/>
                                </DataTrigger>

                                <!-- Question -->
                                <DataTrigger Binding="{Binding MessageIcon}" Value="Question">
                                    <Setter Property="Data" Value="M10,19H13V22H10V19M12,2C17.35,2.22 19.68,7.62 16.5,11.67C15.67,12.67 14.33,13.33 13.67,14.17C13,15 13,16 13,17H10C10,15.33 10,13.92 10.67,12.92C11.33,11.92 12.67,11.33 13.5,10.67C15.92,8.43 15.32,5.26 12,5A3,3 0 0,0 9,8H6A6,6 0 0,1 12,2Z"/>
                                    <Setter Property="Fill" Value="#2196F3"/>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </Path.Style>
                </Path>

                <!-- Text -->
                <TextBlock Grid.Column="1" x:Name="MessageBlock" Text="{Binding Message}" 
                           TextWrapping="Wrap" Foreground="White" FontSize="{StaticResource Font.Size.Body}" VerticalAlignment="Center" MaxWidth="400"/>
            </Grid>

            <!-- Footer -->
            <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right" Margin="15,0,15,15">
                <Button x:Name="BtnYes" Content="Yes" IsDefault="True"
                        Style="{StaticResource DialogPrimaryButtonStyle}" Click="BtnPos_Click"/>
                <Button x:Name="BtnOk" Content="OK" IsDefault="True"
                        Style="{StaticResource DialogPrimaryButtonStyle}" Click="BtnPos_Click"/>
                <Button x:Name="BtnNo" Content="No" 
                        Style="{StaticResource DialogButtonStyle}" Click="BtnNeg_Click"/>
                <Button x:Name="BtnCancel" Content="Cancel" 
                        Style="{StaticResource DialogButtonStyle}" Click="BtnNeg_Click"/>
            </StackPanel>
        </Grid>
    </Border>
</Window>
